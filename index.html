<?php header('Access-Control-Allow-Origin: *'); ?>
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="lib/pixi.js"> </script> </head>
    <script src="lib/jquery-2.1.4.min.js"></script>
    <script src="lib/jquery.mousewheel.min.js"></script>
<script src="lib/bump/bin/bump.js"> </script> </head>
<script src="lib/snmp.js"> </script> </head>
<body>
    <script>

        drawNetworkTopology.switchList = [];
        drawNetworkTopology.netList = [];
        $.post( "data.php", { action: "switch" }, function( data ) {
            data = JSON.parse(data);
            for(let i = 0; i < data.length; i++) {
                var sw = {name: data[i].key.toString(),
                description: data[i].name,
                    portCount: parseInt(data[i].bottomArray.length)+parseInt(data[i].topArray.length)};
                drawNetworkTopology.switchList.push(sw);
            }
        });
        console.log(drawNetworkTopology.switchList);

        $.post( "data.php", { action: "link" }, function( data ) {
            data = JSON.parse(data);
            for(let i = 0; i < data.length; i++) {
                var l =  {fromSwitch: data[i].fromSwitch,
                            toSwitch: data[i].toSwitch,
                            toPortNumber: parseInt(data[i].toPortNumber),
                            fromPortNumber: parseInt(data[i].fromPortNumber), lineSize: 4};
                drawNetworkTopology.netList.push(l);
            }
        });
        console.log(drawNetworkTopology.netList);
        ////    drawNetworkTopology.netList = [
        ////    {fromSwitch: "switch1", toSwitch: "switch2", toPortNumber: 5, fromPortNumber:12, lineSize: 4},
        ////    {fromSwitch: "switch2", toSwitch: "switch3", toPortNumber: 9, fromPortNumber:7, lineSize: 23}
        ////];
        SNMP = drawNetworkTopology();

    </script>
</body>
</html>
